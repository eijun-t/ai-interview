<context>
# Overview  
AI面接官は、GPT-4oを活用した新卒就活生専用の面接練習サービスです。学生が志望企業を入力すると、AI面接官がその企業の最新情報をWeb検索で取得し、企業に特化した質問を生成します。音声とテキストの両方に対応し、実際の面接に近い環境で練習できる模擬面接システムを提供します。現在、インターフェースが完成しており、実際のAI機能を実装して完全に動作するサービスを構築する必要があります。

# Core Features  
## AI面接官システム
- GPT-4oを活用したリアルタイム質問生成と評価
- 企業特化：ユーザー入力企業のWeb検索情報を基にした質問生成
- 業界知識：事前準備された業界別質問データベース
- 音声機能：男女選択可能な音声出力、音声入力（選択制）

## 企業情報収集システム
- 企業名自動補完機能（事前準備された企業データベース）
- Web検索による企業情報取得（新卒採用ページ、IR情報、統合報告書等）
- 最新企業動向・ニュースの収集
- 企業情報処理時間：最大1分以内（進捗表示付き）

## インタラクティブチャット
- リアルタイムでの質問と回答のやり取り
- タイピングインジケーターと進捗表示
- 音声入力・出力機能（Web Speech API）
- ユーザー制御可能な質問数設定（途中変更可能）

## フィードバックシステム
- 面接終了後の詳細分析レポート
- 企業理解度、論理性、熱意、コミュニケーション能力の評価
- 改善点の具体的な提案
- フィードバック内容の保存

## 業界特化機能
- 全業界網羅的な質問データベース
- 一般的な面接質問（ガクチカ、志望動機）をベースとした企業・業界特化質問の派生

## 認証・ユーザー管理システム
- Supabase Auth による認証システム
- Google、Microsoft、GitHub認証対応
- ユーザー情報管理（プロフィール、面接履歴）
- セッション管理・セキュリティ対応
- 面接履歴・フィードバック管理機能

# User Experience  
## ユーザーペルソナ
- 新卒就活生（大学生・大学院生）
- 面接練習を必要とする学生

## キーユーザーフロー
1. ホームページでサービス概要を確認
2. 新規ユーザー登録・ログイン（Google/Microsoft/GitHub）
3. 企業名を入力（自動補完機能）
4. 面接設定（質問数、音声設定等）
5. AI面接官による企業情報収集（進捗表示）
6. 企業特化型模擬面接の実施
7. 詳細な分析レポートの確認
8. 面接履歴・フィードバックの管理

## UI/UX考慮事項
- 既存のモダンなインターフェースを活用
- 企業名入力時の自動補完UI
- 面接官準備中の進捗表示
- 音声・テキスト入力の切り替え機能
</context>
<PRD>
# Technical Architecture  
## システムコンポーネント
- フロントエンド: Next.js 15 + TypeScript + Tailwind CSS（実装済み）
- バックエンド: Next.js API Routes
- AI/ML: OpenAI GPT-4o API統合
- データベース: PostgreSQL（企業データベース、フィードバック保存）
- 音声処理: Web Speech API（音声認識・音声合成）
- Web検索: Serper.dev API

## データモデル
- User: ユーザー情報、認証情報、面接履歴
- Company: 企業情報、企業データベース
- Interview: 面接セッション、質問・回答履歴
- Question: 質問データベース、業界別カテゴリ
- Feedback: 評価結果、改善点（保存対象）
- IndustryKnowledge: 業界別質問・知識データベース
- Session: ユーザーセッション管理

## APIs and Integrations
- OpenAI GPT-4o API: 質問生成、回答評価
- Serper.dev API: Web検索による企業情報取得
- Web Speech API: 音声入力・出力
- TTS API: 音声合成（男女選択可能）
- 企業データベースAPI: 企業一覧取得（上場企業、新卒採用実績企業）
- Supabase Auth: 認証システム（Google、Microsoft、GitHub）

## Infrastructure Requirements
- Vercel: ホスティング・デプロイメント
- Supabase: データベース（PostgreSQL）
- Redis: セッション管理・キャッシュ・企業情報キャッシュ

# Development Roadmap  
## フェーズ1: 基本機能実装（MVP）
- Supabase認証システム実装
- OpenAI GPT-4o API統合
- 企業データベース構築（企業一覧の取得・整備）
- 企業名自動補完機能
- 基本的な質問生成システム
- データベース設計と実装（ユーザー管理含む）

## フェーズ2: 企業特化機能
- Serper.dev API統合（Web検索機能）
- 企業情報収集・解析システム
- 企業特化質問生成アルゴリズム
- 業界別質問データベース構築
- 面接セッション管理

## フェーズ3: 音声・UX機能
- 音声入力・出力機能（Web Speech API）
- 音声合成（男女選択機能）
- 質問数制御機能（途中変更可能）
- 企業情報処理進捗表示
- UI/UXの最適化

## フェーズ4: 評価・フィードバック機能
- 詳細フィードバックシステム
- 企業理解度評価アルゴリズム
- 分析レポート生成
- フィードバック保存・管理
- 面接履歴・成績管理機能
- ユーザーダッシュボード機能
- 評価指標の改善

# Logical Dependency Chain
## 開発順序
1. **基盤構築**: Supabase認証システム、データベース設計、企業データベース構築
2. **企業情報システム**: 企業一覧取得、自動補完機能
3. **AI統合**: OpenAI GPT-4o API統合、基本的な質問生成
4. **Web検索統合**: Serper.dev API統合、企業情報収集
5. **チャット機能**: リアルタイムチャット、質問と回答の管理
6. **音声機能**: Web Speech API統合、音声入力・出力
7. **評価システム**: 回答分析、フィードバック生成

## 迅速な可視化
- 既存のUIに基本的なAI応答を組み込み
- 段階的に機能を追加・改善
- 各フェーズで動作可能なプロトタイプを維持

# Risks and Mitigations  
## 技術的課題
- OpenAI API制限・コスト: レート制限対応、効率的なプロンプト設計
- Web検索API制限: Serper.dev API制限対応、キャッシュ機能
- 音声認識精度: フォールバック機能、テキスト入力併用
- 企業情報処理時間: 最適化、並列処理、進捗表示

## MVP課題
- 企業データベースの網羅性: 複数ソースからの企業情報収集
- ユーザー体験の最適化: 企業情報収集時間の短縮
- AI応答品質: 企業特化プロンプトエンジニアリング

## リソース制約
- API使用量の最適化（OpenAI + Serper.dev）
- 企業情報のキャッシュ戦略
- 段階的な機能展開

# Appendix  
## 技術仕様
- Node.js 18+
- PostgreSQL 14+
- OpenAI GPT-4o API
- Serper.dev API
- Web Speech API

## 企業データベース取得ソース
- 上場企業リスト（東証、マザーズ、JASDAQ）
- 新卒採用実績企業リスト
- 帝国データバンク（従業員数フィルタ）
- 大手企業グループ・関連会社

## 研究成果
- 面接評価に関する学術研究
- 音声認識技術の最新動向
- UI/UXベストプラクティス
- 企業分析手法
</PRD> 